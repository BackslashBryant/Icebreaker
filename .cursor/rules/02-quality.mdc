---
description: "Quality practices, verification, security, and git hygiene"
globs: ["**/*"]
alwaysApply: true
---

# Verification & Quality Gates

## Automated Checks
- Prefer scripted checks whenever possible; expose them via `npm run` so `scripts/verify-all` can discover them.
- Keep validations fast and deterministic so they can run locally and in CI.
- When adding a new stack, update `scripts/verify-all` or your package scripts to include lint, test, build, type, and audit steps.

## Manual Validation
- Document any manual verification performed (UI walkthroughs, API calls, accessibility checks).
- Capture screenshots, console output, or logs; attach them to the ticket/PR.
- Note residual risk or missing coverage so it can be automated later.

## CI Expectations
- `Template CI` currently runs the preflight check and best-effort verification.
- Extend the workflow once your stack is generated (e.g., add matrix jobs for frontend/backend services).

---

# Security & Dependencies

## Safe Defaults
- Do not commit secrets, tokens, or personal data.
- Store configuration in environment variables or secret managers; document required keys in project docs.
- Review new dependencies for maintenance state, licensing, and support plans.

## Automation Aids
- Example security tooling lives in `examples/automation/`; copy only what your project needs.
- If you adopt a dependency audit or custom security script, wire it into your verify step and CI.

---

# Git Hygiene

- One issue/task per branch; name it `{type}/{issue-id}-{slug}` (e.g., `feat/123-add-auth`).
- Keep commits scoped and reference the issue ID in the message.
- Use GitHub MCP or your automation scripts to create branches, commits, PRs, and merges.
- Merge cleanly (squash/rebase) after quality gates are green and the ticket is updated.

---

# MCP Quality Checkpoints

- **UI / Accessibility**: Playwright MCP for screenshots, axe/Lighthouse when UI changes.
- **Data / Storage**: Supabase MCP for schema diffs, advisor checks, and logs.
- **Research**: DocFork MCP or Context7 for official references; summarize findings in the ticket.
- **System Ops**: Desktop Commander MCP for local shell automation when allowed.

Document the MCP run outputs or link to transcripts so reviewers can see what was validated.

---

# Quality Checklist

- [ ] Preflight succeeded (`npm run preflight`).
- [ ] Plan/tasks executed (Spec Kit or manual plan).
- [ ] Automated checks run (`npm run verify` or equivalent).
- [ ] Manual checks (if any) recorded with evidence.
- [ ] Issue/Spec updated with outcome, risk, and follow-ups.
- [ ] Git branch merged and cleaned up.

Anything left unchecked should be captured as follow-up work.